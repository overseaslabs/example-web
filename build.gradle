/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */


task build(dependsOn: ':frontend:webpack') {
    doLast {
        def backendStaticResources = new File(project(':backend').projectDir ,"/src/main/resources/static");
        def backendTemplates = new File(project(':backend').projectDir ,"/src/main/resources/templates");

        [backendStaticResources,backendTemplates].each {
            delete(fileTree(it) {
                exclude '.gitignore'
            })
        }

        copy {
            from file('frontend/build/index.html')
            into 'backend/src/main/resources/templates'
        }

        copy {
            from 'frontend/build'
            into 'backend/src/main/resources/static'
        }
    }
}

